---

## Nextjs íŒŒì¼ ê·œì¹™

NextjsëŠ” íŒŒì¼ ê·œì¹™ì— ë”°ë¼ app í´ë” í•˜ìœ„ì— error, not-found, loading íŒŒì¼ì„ ìƒì„±í•˜ë©´ ìë™ìœ¼ë¡œ error, not-found, loading UIë¥¼ ì¶œë ¥í•´ì¤ë‹ˆë‹¤.

ë˜í•œ, í•´ë‹¹ í˜ì´ì§€ë‚´ì˜ ê°€ì¥ ê°€ê¹Œìš´ íŒŒì¼ ê·œì¹™ì„ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì€ í´ë”êµ¬ì¡°ê°€ ìˆë‹¤ë©´ main í˜ì´ì§€ì—ì„œëŠ” ê°€ì¥ ê°€ê¹Œìš´ ì¦‰, main í´ë”ì˜ error, not-found, loadingì˜ íŒŒì¼ ê·œì¹™ì„ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤.

root í˜ì´ì§€ì—ì„œëŠ” app í´ë”ì˜ ìµœìƒìœ„ error, not-found loadingì˜ íŒŒì¼ê·œì¹™ì„ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤.

```jsx
ğŸ“¦app
 â”£ ğŸ“‚main
 â”ƒ â”£ ğŸ“œpage.js
 â”ƒ â”£ ğŸ“œerror.js
 â”ƒ â”£ ğŸ“œnot-found.js
 â”ƒ â”— ğŸ“œloading.js
 â”£ ğŸ“œerror.js
 â”£ ğŸ“œnot-found.js
 â”£ ğŸ“œloading.js
 â”£ ğŸ“œfavicon.ico
 â”£ ğŸ“œglobals.css
 â”£ ğŸ“œlayout.js
 â”£ ğŸ“œpage.js
 â”— ğŸ“œpage.module.css
```

<br/>

## íŒŒì¼ ê·œì¹™ ì‚¬ìš©í•˜ê¸°

### 1 ) error

**error.js ë™ì‘ ê³¼ì •**

- `error.js`ëŠ” ìë™ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ `Error Boundary`ë¥¼ ìƒì„±í•˜ê³ ,Â `page.js`Â ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” ì¤‘ì²©ëœ ìì‹ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ê°ìŒ‰ë‹ˆë‹¤.
- `error.js`íŒŒì¼ë¡œë¶€í„° exportëœ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ”Â fallbackÂ ì»´í¬ë„ŒíŠ¸ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- `Error Boundary` ì•ˆì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, í•´ë‹¹ ì—ëŸ¬ê°€Â í¬í•¨Â ë˜ë©°, fallbackì»´í¬ë„ŒíŠ¸ê°€Â ë Œë”Â ë©ë‹ˆë‹¤.
- fallback ì—ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œ, ì—ëŸ¬ ë°”ìš´ë”ë¦¬Â ìƒìœ„ì˜Â ë ˆì´ì•„ì›ƒë“¤ì€ ê·¸ë“¤ì˜ ìƒíƒœë¥¼Â ìœ ì§€í•˜ë©°, ì¸í„°ë™í‹°ë¸Œí•œ ìƒíƒœë¥¼Â ì§€ì†í•©ë‹ˆë‹¤.

`Error Boundary`ì— ëŒ€í•œ ë‚´ìš©ì€ ì•„ë˜ í•™ìŠµìë£Œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

[ğŸ“– React Error Boundary](https://www.notion.so/React-Error-Boundary-4036401817e5412489ac42459741578c?pvs=21)

<br/>

**error.js**

ê¸°ë³¸ì ìœ¼ë¡œ error.js íŒŒì¼ì€ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.

```jsx
"use client"; // ì—ëŸ¬ ì»´í¬ë„ŒíŠ¸ëŠ” ë°˜ë“œì‹œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—¬ì•¼ í•©ë‹ˆë‹¤

import { useEffect } from "react";

export default function Error({ error, reset }) {
  useEffect(() => {
    // ì—ëŸ¬ ë¦¬í¬íŠ¸ ì„œë¹„ìŠ¤ì— ì—ëŸ¬ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤
    console.error(error);
  }, [error]);

  return (
    <div>
      <h2>Something went wrong!</h2>
      <button
        onClick={
          // ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë¦¬ë Œë”ë§í•˜ì—¬ ì—ëŸ¬ë¡œë¶€í„° ë¦¬ì»¤ë²„ë§ì„ ì‹œë„í•©ë‹ˆë‹¤.
          // ì—ëŸ¬ê°€ í•´ê²°ëœë‹¤ë©´ ì›ë˜ì˜ ë¦¬ë Œë”ë§ ê²°ê³¼ë¬¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.
          () => reset()
        }
      >
        Try again
      </button>
    </div>
  );
}
```

ì•„ë˜ì™€ ê°™ì´ ì—ëŸ¬ë¥¼ ë§Œë‚œë‹¤ë©´ ìœ„ì—ì„œ ì ìš©í•œ UIë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

![error](https://github.com/NamJongtae/nextjs-study/assets/113427991/eb49e84c-9e83-4897-86c7-b74c76eaf359)

<br/>

### 2 ) not-found

ì•„ë˜ì™€ ê°™ì´ not-found.jsë¥¼ ë§Œë“ ë‹¤ë©´ í•´ë‹¹ë˜ëŠ” URLì´ ì¡´ì¬í•˜ì§€ ì•Šì„ê²½ìš° í•´ë‹¹ not-found í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ê²Œ ë©ë‹ˆë‹¤.

**notFound.js**

```jsx
import Link from "next/link";

export default function NotFound() {
  return (
    <div>
      <h2>Not Found</h2>
      <p>Could not find requested resource</p>
      <Link href="/">Return Home</Link>
    </div>
  );
}
```

![not-found](https://github.com/NamJongtae/nextjs-study/assets/113427991/c3192fa6-5332-4c5c-9009-ba48c63979b7)

<br/>

### 3 ) loading

loading íŒŒì¼ì€ `Suspense` ê¸°ë°˜ì˜ ë¡œë”© ìƒíƒœë¥¼ ìƒì„±í•˜ì—¬ ì¤ë‹ˆë‹¤.

ê°™ì€ í´ë”ì—ì„œ loading.jsëŠ” layout.js ì•ˆì— ì¤‘ì²©ë©ë‹ˆë‹¤. `Suspense` ë¥¼ ìƒì„±í•˜ë©° page.js íŒŒì¼ê³¼ ê·¸ í•˜ìœ„ ìì‹ì„ ìë™ìœ¼ë¡œ ê°ìŒ‰ë‹ˆë‹¤. fallbackìœ¼ë¡œëŠ” loading.js ê°€ ë“¤ì–´ê°€ê²Œë©ë‹ˆë‹¤.

`Suspense` ì— ëŒ€í•œ ë‚´ìš©ì€ ì•„ë˜ í•™ìŠµìë£Œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

[React Suspense](https://www.notion.so/React-Suspense-1bafedc4bd8d434f957fafddca48ff36?pvs=21)

<br/>

**loading.js**

```jsx
export default function Loading() {
  // Or a custom loading skeleton component
  return <p>Loading...</p>;
}
```

<br/>

**posts.js**

```jsx
export default async function Posts() {
  const postsData = await getPosts();
  return (
    <>
      <header>
        <h1>Posts Page</h1>
      </header>
      <main>
        <h2>Posts</h2>
        <ul>
          {postsData.map((data) => {
            return (
              <li key={data.id}>
                <h3>{data.title}</h3>
                <div>{data.content}</div>
              </li>
            );
          })}
        </ul>
      </main>
    </>
  );
}
```

![suspense_befre](https://github.com/NamJongtae/nextjs-study/assets/113427991/4885904a-ad40-484e-8496-7447c928d8b0)

<br/>

### loadingë¥¼ react Suspenseë¥¼ í™œìš©í•˜ì—¬ ì„¸ë¶„í™”í•˜ê¸°

í˜„ì¬ Posts í˜ì´ì§€ì˜ header ê¹Œì§€ë„ loading í˜ì´ì§€ í¬í•¨ë˜ì–´ì„œ postsê°€ ëª¨ë‘ ë¡œë”© ë˜ì–´ì•¼ë§Œ headerê°€ ë³´ì—¬ì§€ê²Œ ë©ë‹ˆë‹¤. headerê¹Œì§€ loadingì— í¬í•¨ë  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ react suspenseë¥¼ í™œìš©í•˜ì—¬ loading ì²˜ë¦¬í•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ëŠ”ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

ë¨¼ì €, loadingì²˜ë¦¬ë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ loading.js ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ PostList ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**PostList.js**

```jsx
import { getPosts } from "@/lib/actions";
import React from "react";

export default async function PostList() {
  const postsData = await getPosts();

  return (
    <ul>
      {postsData.map((data) => {
        return (
          <li key={data.id}>
            <h3>{data.title}</h3>
            <div>{data.content}</div>
          </li>
        );
      })}
    </ul>
  );
}
```

<br/>

ì´í›„ PostList ì»´í¬ë„ŒíŠ¸ë¥¼ Suspenseë¡œ ê°ì‹¸ì¤ë‹ˆë‹¤. fallbackì—ëŠ” loadingì— ì‚¬ìš©ë  UIë¥¼ ë„£ìŠµë‹ˆë‹¤.

**Posts.js**

```jsx
import { getPosts } from "@/lib/actions";
import { Suspense } from "react";
import PostList from "../components/PostList";

export default async function Posts() {
  return (
    <>
      <header>
        <h1>Posts Page</h1>
      </header>
      <main>
        <h2>Posts</h2>
        <Suspense fallback={<p>loading...</p>}>
          <PostList />
        </Suspense>
      </main>
    </>
  );
}
```

ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ë©´ ë³„ë„ë¡œ ë¡œë”©ì²˜ë¦¬ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ë¥¼ ë³´ë©´ loading ìƒíƒœê°€ ë˜ì–´ë„ headerê°€ ê·¸ëŒ€ë¡œ ìœ ì§€ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![suspense_after](https://github.com/NamJongtae/nextjs-study/assets/113427991/15614104-0539-467f-b86d-e7e13301f249)
